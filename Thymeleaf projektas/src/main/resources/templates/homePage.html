<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">
<head th:replace="fragments :: head('Song list')">

</head>
<body>
<nav th:replace="fragments :: menuBar('')"></nav>
<div class="container d-flex flex-column" sec:authorize="!isAuthenticated()">
    <a class="fs-1" th:href="@{/login}" th:text="#{nav.login}"></a>
    <br>
    <span class="fs-1" th:text="#{homepage.or}"></span>
    <br>
    <a class="fs-1" th:href="@{/register}" th:text="#{nav.register}"></a>
</div>

<div sec:authorize="isAuthenticated()">
    <span th:text="#{homepage.welcome} + ' '"></span>
    <span sec:authentication="principal.Username"></span>
    <h4 th:text="#{homepage.liked_songs}"></h4>
    <div>
        <table class="table table-striped table-dark table-hover">
            <thead>
            <tr>
                <th scope="col">No</th>
                <th scope="col" th:text="#{songs.name}">
                </th>
                <th scope="col" th:text="#{songs.album}">
                </th>
                <th scope="col" th:text="#{songs.author}">
                </th>
                <th scope="col" th:text="#{songs.playtime}">
                </th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="song, i: ${songList}">
                <td th:text="${i.index + 1}"></td>
                <td th:text="${song.songName}"></td>
                <td>
                    <span th:each="album : ${song.albumList}" th:text="${album.name} + ' '"></span>
                </td>
                <td>
                    <a th:each="author : ${song.authorList}" th:text="${author.name} + ' '"
                       th:href="@{/author/{authorId}(authorId=${author.id})}"></a>
                </td>
                <td th:text="${song.playtime}"></td>
                <td>
                    <div class="d-flex justify-content-between" sec:authorize="isAuthenticated()">
                        <form method="post" th:action="@{/UnLikeSong/{songId}(songId=${song.id})}">
                            <button class="btn btn-primary">
                                <i class="fa-solid fa-heart"></i>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</div>

</body>
</html>